# api ‚Äì FastAPI Playground for VFX Shot Management

This worktree contains **self‚Äëcontained FastAPI examples** used in the ‚ÄúAPI & Backend‚Äù topic of the *Machine‚ÄëLearning for VFX &¬†3D* course. The goal is to learn how to stand up lightweight REST services that feed ML pipelines or DCC tools (Houdini, Nuke, etc.).

---

## üìÇ Folder structure

```text
api/                    ‚Üê this worktree root (branch `api`)
‚îú‚îÄ‚îÄ fastapi/            ‚Üê FastAPI demo apps
‚îÇ   ‚îî‚îÄ‚îÄ server.py       ‚Üê shot‚Äëmanagement sample service
‚îú‚îÄ‚îÄ README.md           ‚Üê (you are here)
‚îî‚îÄ‚îÄ LICENSE             ‚Üê inherited license from upstream
```

### server.py ‚Äì quick glance

* Provides **CRUD** endpoints for a tiny in‚Äëmemory *Shots* table.
* Uses **Pydantic** for type validation.
* Automatically exposes **Swagger /docs** and **Redoc /redoc** UIs.

---

## Running the demo service

> Requires **Python¬†‚â•¬†3.9** & the *api* branch environment (activate first).

```bash
# inside this worktree
pip install fastapi "uvicorn[standard]" pydantic

# launch (auto‚Äëreload on save)
uvicorn fastapi.server:app --reload --port 8000
```

Open [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs) to play with the endpoints.

### Example `curl`

```bash
# list all shots
curl http://127.0.0.1:8000/

# fetch by number
curl http://127.0.0.1:8000/get-shot/1001
```

---

## Endpoints overview

| Method   | Path                            | Description                   |
| -------- | ------------------------------- | ----------------------------- |
| `GET`    | `/`                             | List every shot record        |
| `GET`    | `/get-shot/{shot_num}`          | Fetch shot by *number*        |
| `GET`    | `/get-shot-by-name/{shot_name}` | Fetch shot by *name*          |
| `POST`   | `/create-shot/{shot_num}`       | Create a new shot (JSON body) |
| `PUT`    | `/update-shot/{shot_num}`       | Update existing shot          |
| `DELETE` | `/delete-shot/{shot_num}`       | Delete shot                   |

Request/response schemas are auto‚Äëgenerated by FastAPI.

---

## üîÑ Sync etiquette

This worktree tracks **`upstream/api`**. To pull instructor changes:

```bash
git fetch upstream
cd /path/to/ml4vfxTrees/api
git merge upstream/api   # or `git rebase` if you prefer
```

Your commits stay in **origin/api** until you open a PR.

---

## üóíÔ∏è¬†Next steps / TODO

* [ ] Swap in a real database (SQLite or PostgreSQL via SQLModel)
* [ ] JWT auth & role‚Äëbased access for shot tasks
* [ ] Houdini shelf tool that calls these endpoints
* [ ] Dockerfile for production deployment

Feel free to fork this branch or open PRs to suggest improvements.

